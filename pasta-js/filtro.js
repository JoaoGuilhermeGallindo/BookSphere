const data = [
  {
    id: "divina-comedia",
    titulo: "A Divina Comédia",
    autor: "Dante Alighieri",
    capa: "../Capas/ADivinaComedia.jpg",
    genero: "Clássico",
  },
  {
    id: "dom-casmurro",
    titulo: "Dom Casmurro",
    autor: "Machado de Assis",
    capa: "../Capas/DomCasmurro.jpg",
    genero: "Romance",
  },
  {
    id: "a-carteira",
    titulo: "A Carteira",
    autor: "Machado de Assis",
    capa: "../Capas/ACarteira.jpg",
    genero: "Conto",
  },
  {
    id: "os-lusiadas",
    titulo: "Os Lusiadas",
    autor: "Luís Vaz de Camões",
    capa: "../Capas/OsLusiadas.jpg",
    genero: "Clássico",
  },
  {
    id: "arte-poetica",
    titulo: "A Arte Poética",
    autor: "Aristóteles",
    capa: "../Capas/AArtePoetica.jpg",
    genero: "Filosofia",
  },
  {
    id: "alma-do-lazaro",
    titulo: "A Alma do Lázaro",
    autor: "José de Alencar",
    capa: "../Capas/AAlmadoLazaro.jpg",
    genero: "Romance",
  },
  {
    id: "bela-madame-vargas",
    titulo: "A Bela Madame Vargas",
    autor: "Camilo Castelo Branco",
    capa: "../Capas/ABelaMadameVargas.jpg",
    genero: "Romance",
  },
  {
    id: "brasileira-de-prazins",
    titulo: "A Brasileira de Prazins",
    autor: "Camilo Castelo Branco",
    capa: "../Capas/ABrasileiraDePrazins.jpg",
    genero: "Romance",
  },
  {
    id: "dama-das-camelias",
    titulo: "A Dama das Camélias",
    autor: "Alexandre Dumas Filho",
    capa: "../Capas/ADamaDasCamelias.jpg",
    genero: "Romance",
  },
  {
    id: "escrava-isaura",
    titulo: "A Escrava Isaura",
    autor: "Bernardo Guimarães",
    capa: "../Capas/AEscravaIsaura.jpg",
    genero: "Romance",
  },
  {
    id: "esfinge-sem-segredo",
    titulo: "A Esfinge sem Segredo",
    autor: "Oscar Wilde",
    capa: "../Capas/AEsfingeSemSegredo.jpg",
    genero: "Conto",
  },
  {
    id: "harpa-do-crente",
    titulo: "A Harpa do Crente",
    autor: "Alexandre Herculano",
    capa: "../Capas/AHarpaDoCrente.jpg",
    genero: "Poesia",
  },
  {
    id: "igreja-do-diabo",
    titulo: "A Igreja do Diabo",
    autor: "Machado de Assis",
    capa: "../Capas/AIgrejaDoDiabo.jpg",
    genero: "Conto",
  },
  {
    id: "iracema",
    titulo: "Iracema",
    autor: "José de Alencar",
    capa: "../Capas/Iracema.jpg",
    genero: "Romance",
  },
  {
    id: "mulher-de-preto",
    titulo: "A Mulher de Preto",
    autor: "Machado de Assis",
    capa: "../Capas/AMulherDePreto.jpg",
    genero: "Conto",
  },
  {
    id: "pata-da-gazela",
    titulo: "A Pata da Gazela",
    autor: "José de Alencar",
    capa: "../Capas/APataDaGazela.jpg",
    genero: "Romance",
  },
  {
    id: "utopia",
    titulo: "A Utopia",
    autor: "Thomás Morus",
    capa: "../Capas/AUtopia.jpg",
    genero: "Filosofia",
  },
  {
    id: "carta-de-pero-vaz",
    titulo: "A Carta de Pero Vaz de Caminha",
    autor: "Pero Vaz de Caminha",
    capa: "../Capas/ACartaDePeroVazDeCaminha.jpg",
    genero: "Histórico",
  },
  {
    id: "cidade-e-asserras-",
    titulo: "A Cidade e as Serras",
    autor: "Eça de Queirós",
    capa: "../Capas/ACidadeEasSerras.jpg",
    genero: "Romance",
  },
  {
    id: "adao-e-eva",
    titulo: "Adão e Eva",
    autor: "Machado de Assis",
    capa: "../Capas/AdaoEEva.jpg",
    genero: "Conto",
  },
  {
    id: "moreninha",
    titulo: "A Moreninha",
    autor: "Joaquim Manuel de Macedo",
    capa: "../Capas/AMoreninha.jpg",
    genero: "Romance",
  },
  {
    id: "tempestade",
    titulo: "A Tempestade",
    autor: "William Shakespeare",
    capa: "../Capas/ATempestade.jpg",
    genero: "Teatro",
  },
  {
    id: "ViaLactea",
    titulo: "Via Lactea",
    autor: "Olavo Bilac",
    capa: "../Capas/ViaLactea.jpg",
    genero: "Poesia",
  },
  {
    id: "vozes-da-africa",
    titulo: "Vozes d’Africa",
    autor: "Castro Alves",
    capa: "../Capas/VozesDAfrica.jpg",
    genero: "Poesia",
  },
  {
    id: "cartomante",
    titulo: "A Cartomante",
    autor: "Machado de Assis",
    capa: "../Capas/ACartomante.jpg",
    genero: "Conto",
  },
  {
    id: "dom-quixote-volume1",
    titulo: "Dom Quixote Vol. 1",
    autor: "Miguel de Cervantes",
    capa: "../Capas/DomQuixoteVolumeI.jpg",
    genero: "Clássico",
  },
  {
    id: "dom-quixote-volume2",
    titulo: "Dom Quixote Vol. 2",
    autor: "Miguel de Cervantes",
    capa: "../Capas/DomQuixoteVolumeII.jpg",
    genero: "Clássico",
  },
  {
    id: "macbeth",
    titulo: "Macbeth",
    autor: "William Shakespeare",
    capa: "../Capas/Macbeth.jpg",
    genero: "Teatro",
  },
  {
    id: "helena",
    titulo: "Helena",
    autor: "Machado de Assis",
    capa: "../Capas/Helena.jpg",
    genero: "Romance",
  },
  {
    id: "livro-de-máguas",
    titulo: "Livro de Máguas",
    autor: "Florbela Espanca",
    capa: "../Capas/LivroDeMaguas.jpg",
    genero: "Poesia",
  },
  {
    id: "livro-do-desassossego",
    titulo: "Livro do Desassossego",
    autor: "Fernando Pessoa",
    capa: "../Capas/LivroDoDesassossego.jpg",
    genero: "Filosofia",
  },
  {
    id: "memorias-postumas",
    titulo: "Memórias Póstumas de Brás Cubas",
    autor: "Machado de Assis",
    capa: "../Capas/MemoriasPostumasdeBrasCubas.jpg",
    genero: "Romance",
  },
  {
    id: "mensagem",
    titulo: "Mensagem",
    autor: "Fernando Pessoa",
    capa: "../Capas/Mensagem.jpg",
    genero: "Poesia",
  },
  {
    id: "mulato",
    titulo: "O Mulato",
    autor: "Aluísio Azevedo",
    capa: "../Capas/OMulato.jpg",
    genero: "Romance",
  },
  {
    id: "a-carne",
    titulo: "A Carne",
    autor: "Júlio Ribeiro",
    capa: "../Capas/ACarne.jpg",
    genero: "Romance",
  },
  {
    id: "o-alienista",
    titulo: "O Alienista",
    autor: "Machado de Assis",
    capa: "../Capas/OAlienista.jpg",
    genero: "Romance",
  },
  {
    id: "auto-da-barca-do-inferno",
    titulo: "Auto da Barca do Inferno",
    autor: "Gil Vicente",
    capa: "../Capas/AutoDaBarcaDoInferno.jpg",
    genero: "Teatro",
  },
  {
    id: "eu-profundo",
    titulo: "O Eu Profundo e os Outros Eus",
    autor: "Fernando Pessoa",
    capa: "../Capas/OEuProfundoEOsOutrosEus.jpg",
    genero: "Poesia",
  },
  {
    id: "contos-para-velhos",
    titulo: "Contos para Velhos",
    autor: "Olavo Bilac",
    capa: "../Capas/ContosParaVelhos.jpg",
    genero: "Conto",
  },
  {
    id: "guardador-de-rebanhos",
    titulo: "O Guardador de Rebanhos",
    autor: "Fernando Pessoa (Alberto Caeiro)",
    capa: "../Capas/OGuardadorDeRebanhos.jpg",
    genero: "Poesia",
  },
  {
    id: "pastor-amoroso",
    titulo: "O Pastor Amoroso",
    autor: "Fernando Pessoa (Alberto Caeiro)",
    capa: "../Capas/OPastorAmoroso.jpg",
    genero: "Poesia",
  },
  {
    id: "os-sertoes",
    titulo: "Os Sertoes",
    autor: "Euclides da Cunha",
    capa: "../Capas/OsSertoes.jpg",
    genero: "Histórico",
  },
  {
    id: "os-maias",
    titulo: "Os Maias",
    autor: "Eça de Queirós",
    capa: "../Capas/OsMaias.jpg",
    genero: "Romance",
  },
  {
    id: "a-mensageira-das-violetas",
    titulo: "A Mensageira das Violetas",
    autor: "Florbela Espanca",
    capa: "../Capas/AMensageiraDasVioletas.jpg",
    genero: "Poesia",
  },
  {
    id: "cancioneiro",
    titulo: "Cancioneiro",
    autor: "Fernando Pessoa",
    capa: "../Capas/Cancioneiro.jpg",
    genero: "Poesia",
  },
  {
    id: "o-que-e-o-casamento",
    titulo: "O que é o Casamento?",
    autor: "José de Alencar",
    capa: "../Capas/OqueEOCasamento.jpg",
    genero: "Ensaio",
  },
  {
    id: "farsa-de-ines-pereira",
    titulo: "Farsa de Inês Pereira",
    autor: "Gil Vicente",
    capa: "../Capas/FarsaDeInesPereira.jpg",
    genero: "Teatro",
  },
  {
    id: "alegria-da-revolucao",
    titulo: "A Alegria da Revolução",
    autor: "Ken Knab",
    capa: "../Capas/AAlegriaDaRevolucao.webp",
    genero: "Ensaio",
  },
  {
    id: "os-escravos",
    titulo: "Os Escravos",
    autor: "Antônio Frederico de Castro Alves",
    capa: "../Capas/OsEscravos.jpg",
    genero: "Poesia",
  },
  {
    id: "este-mundo",
    titulo: "Este Mundo da Injustiça Globalizada",
    autor: "José Saramago",
    capa: "../Capas/EsteMundoDaInjusticaGlobalizada.jpg",
    genero: "Ensaio",
  },
  {
    id: "a-comedia-dos-erros",
    titulo: "A Comédia dos Erros",
    autor: "William Shakespeare",
    capa: "../Capas/AComediaDosErros.jpg",
    genero: "Teatro",
  },
  {
    id: "poemas-fernando-pessoa",
    titulo: "Poemas de Fernando Pessoa",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasDeFernandoPessoa.jpg",
    genero: "Poesia",
  },
  {
    id: "romeu-e-julieta",
    titulo: "Romeu e Julieta",
    autor: "William Shakespeare",
    capa: "../Capas/RomeuEJulieta.jpg",
    genero: "Teatro",
  },
  {
    id: "a-megera-domada",
    titulo: "A Megera Domada",
    autor: "William Shakespeare",
    capa: "../Capas/AMegeraDomada.jpg",
    genero: "Teatro",
  },
  {
    id: "hamlet",
    titulo: "A Tragédia de Hamlet, Príncipe da Dinamarca",
    autor: "William Shakespeare",
    capa: "../Capas/Hamlet.jpg",
    genero: "Teatro",
  },
  {
    id: "sonho-de-uma-noite-de-verao",
    titulo: "Sonho de Uma Noite de Verão",
    autor: "William Shakespeare",
    capa: "../Capas/SonhoDeUmaNoiteDeVerao.jpg",
    genero: "Teatro",
  },
  {
    id: "poesias-ineditas",
    titulo: "Poesias Inéditas",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoesiasIneditas.jpg",
    genero: "Poesia",
  },
  {
    id: "tudo-bem-quando-termina-bem",
    titulo: "Tudo Bem Quando Termina Bem",
    autor: "William Shakespeare",
    capa: "../Capas/TudoBemQuandoTerminaBem.jpg",
    genero: "Teatro",
  },
  {
    id: "o-mercador-de-veneza",
    titulo: "O Mercador de Veneza",
    autor: "William Shakespeare",
    capa: "../Capas/OMercadorDeVeneza.jpg",
    genero: "Teatro",
  },
  {
    id: "trabalhos-de-amor-perdidos",
    titulo: "Trabalhos de Amor Perdidos",
    autor: "William Shakespeare",
    capa: "../Capas/TrabalhosDeAmorPerdidos.jpg",
    genero: "Teatro",
  },
  {
    id: "a-mao-e-a-luva",
    titulo: "A Mão e a Luva",
    autor: "Machado de Assis",
    capa: "../Capas/AMaoEALuva.jpg",
    genero: "Romance",
  },
  {
    id: "conto-de-inverno",
    titulo: "Conto de Inverno",
    autor: "William Shakespeare",
    capa: "../Capas/ContoDeInverno.jpg",
    genero: "Teatro",
  },
  {
    id: "otelo",
    titulo: "Otelo, O Mouro de Veneza",
    autor: "William Shakespeare",
    capa: "../Capas/Otelo.jpg",
    genero: "Teatro",
  },
  {
    id: "antonio-e-cleopatra",
    titulo: "Antônio e Cleópatra",
    autor: "William Shakespeare",
    capa: "../Capas/AntonioECleopatra.jpg",
    genero: "Teatro",
  },
  {
    id: "a-metamorfose",
    titulo: "A Metamorfose",
    autor: "Franz Kafka",
    capa: "../Capas/AMetamorfose.jpg",
    genero: "Clássico",
  },
  {
    id: "rei-lear",
    titulo: "Rei Lear",
    autor: "William Shakespeare",
    capa: "../Capas/ReiLear.jpg",
    genero: "Teatro",
  },
  {
    id: "a-causa-secreta",
    titulo: "A Causa Secreta",
    autor: "Machado de Assis",
    capa: "../Capas/ACausaSecreta.jpg",
    genero: "Conto",
  },
  {
    id: "poemas-traduzidos",
    titulo: "Poemas Traduzidos",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasTraduzidos.jpg",
    genero: "Poesia",
  },
  {
    id: "muito-barulho-por-nada",
    titulo: "Muito Barulho Por Nada",
    autor: "William Shakespeare",
    capa: "../Capas/MuitoBarulhoPorNada.jpg",
    genero: "Teatro",
  },
  {
    id: "julio-cesar",
    titulo: "Júlio César",
    autor: "William Shakespeare",
    capa: "../Capas/JulioCesar.jpg",
    genero: "Teatro",
  },
  {
    id: "poemas-alvaro-de-campos",
    titulo: "Poemas de Álvaro de Campos",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasDeAlvaroDeCampos.jpg",
    genero: "Poesia",
  },
  {
    id: "catalogo-autores-brasileiros",
    titulo: "Catálogo de Autores Brasileiros com a Obra em Domínio Público",
    autor: "Fundação Biblioteca Nacional",
    capa: "../Capas/CatalogoAutoresBrasileiros.jpg",
    genero: "Catálogo",
  },
  {
    id: "a-ela",
    titulo: "A Ela",
    autor: "Machado de Assis",
    capa: "../Capas/AEla.jpg",
    genero: "Poesia",
  },
  {
    id: "o-banqueiro-anarquista",
    titulo: "O Banqueiro Anarquista",
    autor: "Fernando Pessoa",
    capa: "../Capas/OBanqueiroAnarquista.jpg",
    genero: "Conto",
  },
  {
    id: "a-chinela-turca",
    titulo: "A Chinela Turca",
    autor: "Machado de Assis",
    capa: "../Capas/AChinelaTurca.jpg",
    genero: "Conto",
  },
  {
    id: "as-alegres-senhoras-de-windsor",
    titulo: "As Alegres Senhoras de Windsor",
    autor: "William Shakespeare",
    capa: "../Capas/AsAlegresSenhorasDeWindsor.jpg",
    genero: "Teatro",
  },
  {
    id: "poemas-selecionados-florbela",
    titulo: "Poemas Selecionados",
    autor: "Florbela Espanca",
    capa: "../Capas/PoemasSelecionadosFlorbela.jpg",
    genero: "Poesia",
  },
  {
    id: "as-vitimas-algozes",
    titulo: "As Vítimas-Algozes",
    autor: "Joaquim Manuel de Macedo",
    capa: "../Capas/AsVitimasAlgozes.jpg",
    genero: "Romance",
  },
  {
    id: "ricardo-iii",
    titulo: "Ricardo III",
    autor: "William Shakespeare",
    capa: "../Capas/RicardoIII.jpg",
    genero: "Teatro",
  },
  {
    id: "poemas-inconjuntos",
    titulo: "Poemas Inconjuntos",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasInconjuntos.jpg",
    genero: "Poesia",
  },
  {
    id: "a-volta-ao-mundo-em-80-dias",
    titulo: "A Volta ao Mundo em 80 Dias",
    autor: "Júlio Verne",
    capa: "../Capas/AVoltaAoMundoEm80Dias.jpg",
    genero: "Aventura",
  },
  {
    id: "primeiro-fausto",
    titulo: "Primeiro Fausto",
    autor: "Fernando Pessoa",
    capa: "../Capas/PrimeiroFausto.jpg",
    genero: "Poesia",
  },
  {
    id: "senhora",
    titulo: "Senhora",
    autor: "José de Alencar",
    capa: "../Capas/Senhora.jpg",
    genero: "Romance",
  },
  {
    id: "sonetos-camoes",
    titulo: "Sonetos",
    autor: "Luís Vaz de Camões",
    capa: "../Capas/SonetosCamoes.jpg",
    genero: "Poesia",
  },
  {
    id: "eu-e-outras-poesias",
    titulo: "Eu e Outras Poesias",
    autor: "Augusto dos Anjos",
    capa: "../Capas/EuEOutrasPoesias.jpg",
    genero: "Poesia",
  },
  {
    id: "fausto",
    titulo: "Fausto",
    autor: "Johann Wolfgang von Goethe",
    capa: "../Capas/Fausto.jpg",
    genero: "Teatro",
  },
  {
    id: "poemas-ricardo-reis",
    titulo: "Poemas de Ricardo Reis",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasDeRicardoReis.jpg",
    genero: "Poesia",
  },
  {
    id: "o-guarani",
    titulo: "O Guarani",
    autor: "José de Alencar",
    capa: "../Capas/OGuarani.jpg",
    genero: "Romance",
  },
  {
    id: "a-desobediencia-civil",
    titulo: "A Desobediência Civil",
    autor: "Henry David Thoreau",
    capa: "../Capas/ADesobedienciaCivil.jpg",
    genero: "Ensaio",
  },
  {
    id: "a-alma-encantadora-das-ruas",
    titulo: "A Alma Encantadora das Ruas",
    autor: "João do Rio",
    capa: "../Capas/AAlmaEncantadoraDasRuas.jpg",
    genero: "Crônica",
  },
  {
    id: "a-pianista",
    titulo: "A Pianista",
    autor: "Machado de Assis",
    capa: "../Capas/APianista.jpg",
    genero: "Conto",
  },
  {
    id: "poemas-em-ingles",
    titulo: "Poemas em Inglês",
    autor: "Fernando Pessoa",
    capa: "../Capas/PoemasEmIngles.jpg",
    genero: "Poesia",
  },
  {
    id: "a-heranca",
    titulo: "A Herança",
    autor: "Machado de Assis",
    capa: "../Capas/AHeranca.jpg",
    genero: "Conto",
  },
  {
    id: "a-chave",
    titulo: "A chave",
    autor: "Machado de Assis",
    capa: "../Capas/AChave.jpg",
    genero: "Conto",
  },
  {
    id: "eu",
    titulo: "Eu",
    autor: "Augusto dos Anjos",
    capa: "../Capas/Eu.jpg",
    genero: "Poesia",
  },
  {
    id: "as-primaveras",
    titulo: "As Primaveras",
    autor: "Casimiro de Abreu",
    capa: "../Capas/AsPrimaveras.jpg",
    genero: "Poesia",
  },
  {
    id: "a-desejada-das-gentes",
    titulo: "A Desejada das Gentes",
    autor: "Machado de Assis",
    capa: "../Capas/ADesejadaDasGentes.jpg",
    genero: "Conto",
  },
  {
    id: "quincas-borba",
    titulo: "Quincas Borba",
    autor: "Machado de Assis",
    capa: "../Capas/QuincasBorba.jpg",
    genero: "Romance",
  },
  {
    id: "a-segunda-vida",
    titulo: "A Segunda Vida",
    autor: "Machado de Assis",
    capa: "../Capas/ASegundaVida.jpg",
    genero: "Conto",
  },
  {
    id: "medida-por-medida",
    titulo: "Medida Por Medida",
    autor: "William Shakespeare",
    capa: "../Capas/MedidaPorMedida.jpg",
    genero: "Teatro",
  },
  {
    id: "os-dois-cavalheiros-de-verona",
    titulo: "Os Dois Cavalheiros de Verona",
    autor: "William Shakespeare",
    capa: "../Capas/OsDoisCavalheirosDeVerona.jpg",
    genero: "Teatro",
  },
  {
    id: "a-vida-eterna",
    titulo: "A Vida Eterna",
    autor: "Machado de Assis",
    capa: "../Capas/AVidaEterna.jpg",
    genero: "Conto",
  },
];

const livrossection = document.querySelector(".livros-lista");
const searchInput = document.querySelector("#pesquisar");
const searchInput2 = document.querySelector("#pesquisar2");
const generoTexto = document.getElementById("generoSelecionadoTexto");

let generoAtivo = localStorage.getItem("generoSelecionado") || "todos";
let textoBuscaSalvo = localStorage.getItem("textoBusca") || "";

// Função para exibir os livros
const displayData = (livros) => {
  livrossection.innerHTML = "";

  if (livros.length === 0) {
    livrossection.innerHTML = "<p>Nenhum livro encontrado.</p>";
    return;
  }

  livros.forEach((e) => {
    livrossection.innerHTML += `
            <article class="livro-card">
                <img src="${e.capa}" alt="${e.titulo}" />
                <h3>${e.titulo}</h3>
                <p>${e.autor}</p>
                <button onclick="location.href='../livro/sinopse.html?id=${e.id}'">
                    BAIXAR OU LER ONLINE
                </button>
            </article>
        `;
  });
};

// Atualiza o texto do breadcrumb
const atualizarBreadcrumb = (genero) => {
  generoTexto.textContent = genero === "todos" ? "TODOS" : genero.toUpperCase();
};

// Filtro por gênero
const generoButtons = document.querySelectorAll("button[data-genero]");

generoButtons.forEach((button) => {
  button.addEventListener("click", () => {
    generoAtivo = button.getAttribute("data-genero").toLowerCase();

    // Salva no localStorage
    localStorage.setItem("generoSelecionado", generoAtivo);

    // Limpa o campo de busca e remove do localStorage
    searchInput.value = "";
    searchInput2.value = "";
    localStorage.removeItem("textoBusca");

    // Atualiza breadcrumb
    atualizarBreadcrumb(generoAtivo);

    // Aplica o filtro
    const livrosFiltrados =
      generoAtivo === "todos"
        ? data
        : data.filter((livro) => livro.genero.toLowerCase() === generoAtivo);

    displayData(livrosFiltrados);
  });
});

// Evento de pesquisa
searchInput.addEventListener("input", (e) => {
  const valorBusca = e.target.value.trim();

  // Salva o texto digitado no localStorage
  localStorage.setItem("textoBusca", valorBusca);

  if (valorBusca !== "") {
    // Atualiza breadcrumb com o texto digitado, em maiúsculas
    generoTexto.textContent = valorBusca.toUpperCase();

    // Busca em todos os livros (independente do gênero ativo)
    const livrosFiltrados = data.filter(
      (livro) =>
        livro.titulo.toLowerCase().includes(valorBusca.toLowerCase()) ||
        livro.autor.toLowerCase().includes(valorBusca.toLowerCase()) ||
        livro.genero.toLowerCase().includes(valorBusca.toLowerCase())
    );

    displayData(livrosFiltrados);
  } else {
    // Se campo vazio, volta a mostrar o gênero ativo no breadcrumb
    atualizarBreadcrumb(generoAtivo);

    // Aplica filtro pelo gênero ativo
    const livrosFiltrados =
      generoAtivo === "todos"
        ? data
        : data.filter((livro) => livro.genero.toLowerCase() === generoAtivo);

    displayData(livrosFiltrados);
  }
});

// Evento de pesquisa
searchInput2.addEventListener("input", (e) => {
  const valorBusca = e.target.value.trim();

  // Salva o texto digitado no localStorage
  localStorage.setItem("textoBusca", valorBusca);

  if (valorBusca !== "") {
    // Atualiza breadcrumb com o texto digitado, em maiúsculas
    generoTexto.textContent = valorBusca.toUpperCase();

    // Busca em todos os livros (independente do gênero ativo)
    const livrosFiltrados = data.filter(
      (livro) =>
        livro.titulo.toLowerCase().includes(valorBusca.toLowerCase()) ||
        livro.autor.toLowerCase().includes(valorBusca.toLowerCase()) ||
        livro.genero.toLowerCase().includes(valorBusca.toLowerCase())
    );

    displayData(livrosFiltrados);
  } else {
    // Se campo vazio, volta a mostrar o gênero ativo no breadcrumb
    atualizarBreadcrumb(generoAtivo);

    // Aplica filtro pelo gênero ativo
    const livrosFiltrados =
      generoAtivo === "todos"
        ? data
        : data.filter((livro) => livro.genero.toLowerCase() === generoAtivo);

    displayData(livrosFiltrados);
  }
});

// Exibir ao carregar com base no gênero salvo e texto de busca salvo
window.addEventListener("load", () => {
  if (textoBuscaSalvo !== "") {
    // Se houver texto salvo, coloca no input e atualiza breadcrumb
    searchInput.value = textoBuscaSalvo;
    searchInput2.value = textoBuscaSalvo;
    generoTexto.textContent = textoBuscaSalvo.toUpperCase();

    // Filtra com o texto salvo (busca geral)
    const livrosFiltrados = data.filter(
      (livro) =>
        livro.titulo.toLowerCase().includes(textoBuscaSalvo.toLowerCase()) ||
        livro.autor.toLowerCase().includes(textoBuscaSalvo.toLowerCase()) ||
        livro.genero.toLowerCase().includes(textoBuscaSalvo.toLowerCase())
    );

    displayData(livrosFiltrados);
  } else {
    // Senão, mostra o gênero ativo normalmente
    atualizarBreadcrumb(generoAtivo);

    const livrosFiltrados =
      generoAtivo === "todos"
        ? data
        : data.filter((livro) => livro.genero.toLowerCase() === generoAtivo);

    displayData(livrosFiltrados);
  }
});
